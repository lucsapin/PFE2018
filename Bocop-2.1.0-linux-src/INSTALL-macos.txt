****************************
BOCOP INSTALL NOTES - MAC OS
****************************

In the following, <BOCOPHJB> is the folder of the extracted package.
The full path to this folder must NOT contain blanks/spaces.

****************
A. PREREQUISITES

Bocop requires C/C++ and Fortran compilers, as well as CMake.
You can install them with HomeBrew (see A.1) or manually (see A.2).

A.1 HOMEBREW (https://brew.sh)

First install homebrew with the following command in a terminal window:

   sudo /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/
   Homebrew/install/master/install)"

Then install cmake and the compilers:

   brew install cmake
   brew reinstall gcc --without-multilib

Installation can take some time (about an hour on a modern mac).

A.2.1 XCODE

Download and install Xcode from the appstore. Accept the Xcode license.
NOTE: some security updates can reset this license agreement. 
If you get errors such as 'cannot execute C programs' when trying to 
build your problem, run the following command to re-accept the license:
  xcode-select --install

A.2.2 CMAKE

1) Get cmake from internet, put it in /Applications

2) Check that the file 'cmake', 'ccmake' are in the directory
/Applications/CMake.app/Contents/bin/

3) Open a terminal and create symbolic links to /usr/bin as follows:
  sudo ln -s /Applications/CMake.app/Contents/bin/ccmake /usr/bin/ccmake
  sudo ln -s /Applications/CMake.app/Contents/bin/cmake /usr/bin/cmake

4) Check the result by typing in terminal
  which cmake
  which ccmake

The answers should be
  /usr/bin/cmake
  /usr/bin/ccmake

A.2.3 GFORTRAN

1) uninstall the older gfortran if you have one (if not skip to step 2)
open a terminal and type:
  sudo rm -r /usr/local/gfortran /usr/local/bin/gfortran
enter your password
check the uninstallation by typing gfortran in the terminal: 
it shouldn't be recognized (command not found)

2) download the compatible gfortran (gfortran-6.3-bin.tar.gz as of 2017/01)
https://sourceforge.net/projects/hpc/files/hpc/g77/

3) Install
open a terminal and type:
  cd ~/Downloads (or the folder you specified)
  gunzip gfortran-5.0-bin.tar.gz
  sudo tar -xvf gfortran-5.0-bin.tar -C/.
check the installation by typing gfortran in the terminal: 
you shouldn't have 'command not found' but a message like 'no input file'



**********************
B. HOW TO LAUNCH BOCOP

To launch the Bocop interface (Qt) on 32 bits Linux:
- double click on BocopGui32 in <BOCOP>/qtgui or
- run "./BocopGui32" in a terminal at <BOCOP>/qtgui

To launch the Bocop interface (Qt) on 64 bits Linux:
- double click on BocopGui64 in <BOCOP>/qtgui or
- run "./BocopGui64" in a terminal at <BOCOP>/qtgui

On first launch the GUI will open the default problem "goddard".
You can check your installation by running this problem (green triangle icon).
After some compilation steps, you should see the optimization begin.
Some dependencies have to be compiled the first time you build a problem. 
This can take several minutes.

After optimization, the solution file can be visualized directly from 
the Qt interface, or using the Matlab script (bocop.m), located in the 
folder scripts/.

For more information on using bocop and on the examples of optimal control
problems solved by bocop, please refer to the UserGuide and the Examples
notes available on the Download page (bocop.org).

Note: the settings for the GUI should be saved in
$home/.config/Inria/Bocop-x.x.x.conf

************************************
C. HOW TO LAUCH BOCOP (COMMAND LINE)

To build the bocop executable without using the GUI, you can copy the script 
build.sh from <BOCOP>/examples/default into your problem folder, and run it
  sh build.sh

The script will invoke cmake and make to build a binary 'bocop', run it with
  ./bocop

Alternately, you can do the steps manually in your problem folder
  mkdir build
  cd build
  cmake -DPROBLEM_DIR=.. <BOCOP>
  make -j

Then go back to the problem folder and run
  cd .. 
  ./bocop

